<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <data noupdate="0">
        <!--************************ STOCK RESTRICTION GROUP *************************-->
        <record id="stock_restriction_group" model="res.groups">
            <field name="name">Stock Restriction</field>
        </record>
                <!--***************************** SALE ORDER *****************************-->
<!--        <record id="sale_order_restriction_rule" model="ir.rule">-->
<!--            <field name="name">Sale Order Access</field>-->
<!--            <field ref="stock.model_stock_move" name="model_id"/>-->
<!--            <field name="domain_force">[('warehouse_id.id', 'in', user.stock_warehouse_ids.ids)]</field>-->
<!--            <field name="perm_read" eval="True"/>-->
<!--            <field name="groups" eval="[(4, ref('location_security.stock_restriction_group'))]"/>-->
<!--        </record>-->
        <!--***************************** STOCK WAREHOUSE *****************************-->
        <record id="stock_warehouse_restriction_rule" model="ir.rule">
            <field name="name">Warehouse Access</field>
            <field name="model_id" ref="stock.model_stock_warehouse"/>
            <field name="domain_force">[('id', 'in', user.stock_warehouse_ids.ids)]</field>
            <field name="perm_write" eval="True"/>
            <field name="perm_create" eval="True"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_unlink" eval="True"/>
            <field name="groups" eval="[(4, ref('location_security.stock_restriction_group'))]"/>
        </record>
        <!--***************************** STOCK LOCATION *****************************-->
        <record id="stock_location_restriction_rule" model="ir.rule">
            <field name="name">Location Access</field>
            <field name="model_id" ref="stock.model_stock_location"/>
            <field name="domain_force">[('id', 'in', user.stock_location_ids.ids)]</field>
            <field name="perm_write" eval="True"/>
            <field name="perm_create" eval="True"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_unlink" eval="True"/>
            <field name="groups" eval="[(4, ref('location_security.stock_restriction_group'))]"/>
        </record>
        <!--***************************** STOCK QUANT *****************************-->
        <record id="stock_quant_restriction_rule" model="ir.rule">
            <field name="name">Quant Access</field>
            <field ref="stock.model_stock_quant" name="model_id"/>
            <field name="domain_force">[('location_id', 'in', user.stock_location_ids.ids)]</field>
            <field name="perm_write" eval="True"/>
            <field name="perm_create" eval="True"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_unlink" eval="True"/>
            <field name="groups" eval="[(4, ref('location_security.stock_restriction_group'))]"/>
        </record>
        <!--***************************** STOCK MOVE LINE *****************************-->
        <record id="stock_move_line_restriction_rule" model="ir.rule">
            <field name="name">Stock Move Line Access</field>
            <field ref="stock.model_stock_move_line" name="model_id"/>
            <field name="domain_force">[('location_id', 'in', user.stock_location_ids.ids), ('location_dest_id', 'in', user.stock_location_ids.ids)]</field>
            <field name="perm_write" eval="True"/>
            <field name="perm_create" eval="True"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_unlink" eval="True"/>
            <field name="groups" eval="[(4, ref('location_security.stock_restriction_group'))]"/>
        </record>
        <!--***************************** STOCK MOVE *****************************-->
        <record id="stock_move_restriction_rule" model="ir.rule">
            <field name="name">Stock Move Access</field>
            <field ref="stock.model_stock_move" name="model_id"/>
            <field name="domain_force">[('location_id', 'in', user.stock_location_ids.ids), ('location_dest_id', 'in', user.stock_location_ids.ids)]</field>
            <field name="perm_write" eval="True"/>
            <field name="perm_create" eval="True"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_unlink" eval="True"/>
            <field name="groups" eval="[(4, ref('location_security.stock_restriction_group'))]"/>
        </record>
        <!--***************************** STOCK PICKING *****************************-->
        <record id="stock_picking_restriction_rule" model="ir.rule">
            <field name="name">Stock Picking Access</field>
            <field ref="stock.model_stock_picking" name="model_id"/>
            <field name="domain_force">['|', ('picking_type_id.warehouse_id', '=', False), ('picking_type_id.warehouse_id', 'in', user.stock_warehouse_ids.ids)]</field>
            <field name="perm_write" eval="True"/>
            <field name="perm_create" eval="True"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_unlink" eval="True"/>
            <field name="groups" eval="[(4, ref('location_security.stock_restriction_group'))]"/>
        </record>
        <!--***************************** STOCK PICKING TYPE*****************************-->
        <record id="stock_picking_type_restriction_rule" model="ir.rule">
            <field name="name">Stock Picking Type Access</field>
            <field ref="stock.model_stock_picking_type" name="model_id"/>
            <field name="domain_force">['|', ('warehouse_id', '=', False), ('warehouse_id', 'in', user.stock_warehouse_ids.ids)]</field>
            <field name="perm_write" eval="True"/>
            <field name="perm_create" eval="True"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_unlink" eval="True"/>
            <field name="groups" eval="[(4, ref('location_security.stock_restriction_group'))]"/>
        </record>
    </data>
</odoo>