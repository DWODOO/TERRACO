<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="hr_view_hr_holidays_filter_inherit" model="ir.ui.view">
        <field name="name">hr.holidays.filter</field>
        <field name="model">hr.leave</field>
        <field name="inherit_id" ref="hr_holidays.view_hr_holidays_filter"/>
        <field name="arch" type="xml">
            <filter name="active_time_off" position="attributes">
                <attribute name="domain">[('holiday_status_id.active', '=', True), ('state', 'not in', ('stop',
                    'prolonged', 'suspend')), '|', ('employee_id', '!=', False), '&amp;', ('employee_id', '=', False),
                    ('state', '!=', 'validate')]
                </attribute>
            </filter>
        </field>
    </record>

    <record id="hr_leave_view_form_inherit" model="ir.ui.view">
        <field name="name">hr.leave.form</field>
        <field name="model">hr.leave</field>
        <field name="inherit_id" ref="hr_holidays.hr_leave_view_form"/>
        <field name="arch" type="xml">
            <xpath expr="//sheet" position="before">
                <field name="smartest_alert_duration_holiday" invisible="1"/>
                <div class="alert alert-warning text-center o_form_header"
                     attrs="{'invisible': [('smartest_alert_duration_holiday', '!=', True)]}" role="status">
                    <a class="close" data-dismiss="alert" href="#" aria-label="Close">
                        <i title="Close" class="small fa fa-times"/>
                    </a>
                    <div>
                        <strong>The duration of this type of time off must not exceed or be less than
                            <field name="smartest_duration_of_request_leave"/>
                            Working Days
                        </strong>
                    </div>
                    <field name="smartest_alert_duration_holiday" invisible="1"/>
                    <field name="smartest_is_mariage" invisible="1"/>
                    <field name="smartest_is_death" invisible="1"/>
                </div>

            </xpath>
            <field name="holiday_status_id" position="after">
                <field name="smartest_is_exceptional_death" invisible="1"/>
                <field name="smartest_mariage_of"
                       attrs="{'invisible': [('smartest_is_mariage', '=', False)],'required': [('smartest_is_mariage', '=', True)]}"/>

                <field name="smartest_death_of"
                       attrs="{'invisible': [('smartest_is_death', '=', False)],'required': [('smartest_is_death', '=', True)]}"/>
                <field name="smartest_death_exceptional_of"
                       attrs="{'invisible': [('smartest_is_exceptional_death', '=', False)],'required': [('smartest_is_exceptional_death', '=', True)]}"/>
            </field>
            <div name="duration_display" position="after">
                <field name="smartest_interim_id"/>
                <field name="smartest_motif" invisible="1"/>
                <field name="smartest_cancellation_reason" invisible="1"/>

                <label for="smartest_parent_id" attrs="{'invisible': [('smartest_parent_id', '=', False)]}"
                       string="Source"/>
                <div attrs="{'invisible': [('smartest_parent_id', '=', False)]}">
                    <div class="o_row">
                        <field name="smartest_parent_id"
                               context="{'form_view_ref': 'hr_holidays.hr_leave_view_form_manager'}"/>
                    </div>
                </div>
                <label for="smartest_precedent_leave" attrs="{'invisible': [('smartest_precedent_leave', '=', False)]}"
                       string="Precedent"/>
                <div attrs="{'invisible': [('smartest_precedent_leave', '=', False)]}">
                    <div class="o_row">
                        <field name="smartest_precedent_leave"
                               context="{'form_view_ref': 'hr_holidays.hr_leave_view_form_manager'}"/>
                    </div>
                </div>
                <label for="smartest_motif" attrs="{'invisible': [('state', 'not in', ['suspend','prolonged'])]}"/>
                <div attrs="{'invisible': [('state', 'not in', ['suspend','prolonged'])]}">
                    <div class="o_row">
                        <field name="smartest_motif"/>
                    </div>
                </div>
                <label for="smartest_cancellation_reason" attrs="{'invisible': [('state', '!=', 'stop')]}"/>
                <div attrs="{'invisible': [('state', '!=', 'stop')]}">
                    <div class="o_row">
                        <field name="smartest_cancellation_reason"/>
                    </div>
                </div>
            </div>
            <field name="supported_attachment_ids" position="attributes">
                <attribute name="attrs">{'invisible': [('leave_type_support_document', '=', False)]}
                </attribute>
            </field>
            <xpath expr="//button[@name='action_refuse']" position="replace">
                <button string="Refuse" name="action_refuse" type="object"
                        attrs="{'invisible': ['|', ('can_approve', '=', False), ('state', 'not in', ('confirm','validate1','validate','done'))]}"/>
            </xpath>
            <xpath expr="//button[@name='action_validate']" position="after">
                <field name="smartest_test_stop" invisible="1"/>
                <field name="smartest_test_suspend" invisible="1"/>
                <field name="smartest_check_edit" invisible="1"/>
                <field name="smartest_request_check_stop" invisible="1"/>
                <field name="smartest_request_check_suspend" invisible="1"/>
                <!--                <field name="smartest_allow_cancellation_request_leave" invisible="1"/>groups="hr_holidays.group_hr_holidays_user"-->
                <button string="Cancel" name="button_stop" type="object"
                        attrs="{'invisible': [
                        ('smartest_test_stop', '=', False)
                       ]}"/>
                <button string="Request Cancellation" name="button_request_stop" type="object"
                        attrs="{'invisible': [
                        ('smartest_request_check_stop', '=', False)
                       ]}"/>
                <button string="Edit" name="button_editer" type="object"
                        attrs="{'invisible': [
                        ('smartest_check_edit', '=', False)
                       ]}"/>
                <button string="Suspend/Prolong" name="action_suspend_prolong" type="object"
                        attrs="{'invisible': [('smartest_test_suspend', '=', False)]}"/>

                <button string="Request Suspend/Prolong" name="action_request_suspend_prolong" type="object"
                        attrs="{'invisible': [('smartest_request_check_suspend', '=', False)]}"/>

            </xpath>
        </field>
    </record>

    <record id="hr_leave_form_view" model="ir.ui.view">
        <field name="name">hr.leave.form.popup</field>
        <field name="model">hr.leave</field>
        <field name="priority" eval="101"/>
        <field name="arch" type="xml">
            <form>
                <group>
                    <field name="smartest_cancellation_reason"/>
                </group>
                <footer>
                    <button string="Approve" name="button_stop_approve" type="object" class="oe_highlight"/>
                    <button string="Cancel" special="cancel"/>
                </footer>
            </form>
        </field>
    </record>
    <record id="hr_leave_form_view_suspension" model="ir.ui.view">
        <field name="name">hr.leave.form.suspension.prologation_popup</field>
        <field name="model">hr.leave</field>
        <field name="priority" eval="100"/>
        <field name="arch" type="xml">
            <form>
                <group>
                    <group>
                        <field name="smartest_type_of_operation" required="1"/>
                    </group>
                    <group>
                        <field name="date_prolonged_suspended" required="1"/>
                    </group>

                    <separator/>
                    <label for="smartest_motif"/>
                    <field name="smartest_motif" nolabel="1"/>
                </group>
                <footer>
                    <button string="Approve" name="button_suspend_prolong_approve" type="object" class="oe_highlight"/>
                    <button string="Cancel" special="cancel"/>
                </footer>
            </form>
        </field>
    </record>
    <record id="hr_leave_form_view_request_suspension" model="ir.ui.view">
        <field name="name">hr.leave.form.request.suspension.prologation</field>
        <field name="model">hr.leave</field>
        <field name="priority" eval="102"/>
        <field name="arch" type="xml">
            <form>
                <group>
                    <group>
                        <field name="smartest_request_type_of_operation" required="1"/>
                    </group>
                    <group>
                        <field name="request_date_prolonged_suspended" required="1"/>
                    </group>

                    <separator/>
                    <label for="smartest_request_motif"/>
                    <field name="smartest_request_motif" nolabel="1"/>
                </group>
                <footer>
                    <button string="Approve" name="button_request_suspend_prolong" type="object" class="oe_highlight"/>
                    <button string="Cancel" special="cancel"/>
                </footer>
            </form>
        </field>
    </record>
    <record id="smartest_hr_leave_manager_form_inherit" model="ir.ui.view">
        <field name="name">smartest.hr.leave.manager.form.inherit</field>
        <field name="model">hr.leave</field>
        <field name="inherit_id" ref="hr_holidays.hr_leave_view_form_manager"/>
        <field name="arch" type="xml">
            <field name="employee_ids" position="before">
                <field name="smartest_check_corrspondant_sociale" invisible="1"/>
            </field>
            <field name="employee_ids" position="attributes">
                <attribute name="attrs">{ 'required': [('holiday_type', '=', 'employee'), ('state', 'in', ('draft',
                    'cancel', 'refuse'))], 'invisible': ['|','|', ('smartest_check_corrspondant_sociale', '!=',
                    True),('holiday_type', '!=', 'employee'), '&amp;', ('state', '=', 'validate'), ('employee_id', '!=',
                    False)], }
                </attribute>
            </field>
        </field>
    </record>
</odoo>
