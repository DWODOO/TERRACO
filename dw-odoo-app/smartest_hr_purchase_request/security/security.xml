<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <data>
        <record id="group_purchase_request_manager" model="res.groups">
            <field name="name">Purchase request Administrator</field>
            <field name="category_id" ref="purchase_tier_validation.module_category_purchase_product_request"/>
            <field name="users" eval="[(4, ref('base.user_root')), (4, ref('base.user_admin'))]"/>
        </record>


<!--        ir.rule-->
        <record id="hr_purchase_request_rule_security_user" model="ir.rule">
            <field name="name">Purchase Request By Department</field>
            <field name="model_id" ref="model_purchase_product_request"/>
            <field name="domain_force">['|', ('requested_by', '=', user.id),'|', ('activity_user_id', '=', user.id), ('requested_by','=', False)]
            </field>
            <field name="groups" eval="[(4, ref('purchase_tier_validation.group_purchase_product_request_user'))]"/>
        </record>
        <record id="hr_purchase_request_rule_security_manager" model="ir.rule">
            <field name="name">Purchase Request By Department</field>
            <field name="model_id" ref="model_purchase_product_request"/>
            <field name="domain_force">['|', ('department_id', 'in', user.author_department_ids.ids), ('department_id','=',
                False)]
            </field>
            <field name="groups" eval="[(4, ref('smartest_hr_purchase_request.group_purchase_request_manager'))]"/>
        </record>
        <record id="hr_purchase_request_rule_security_user" model="ir.rule">
            <field name="name">Purchase Request By Department</field>
            <field name="model_id" ref="model_purchase_product_request"/>
            <field name="domain_force">['|', ('requested_by', '=', user.id),'|', ('activity_user_id', '=', user.id), ('requested_by','=', False)]
            </field>
            <field name="groups" eval="[(4, ref('purchase_tier_validation.group_purchase_product_request_user'))]"/>
        </record>
        <record id="hr_purchase_order_rule_security_manager" model="ir.rule">
            <field name="name">Purchase Order By Department</field>
            <field name="model_id" ref="model_purchase_order"/>
            <field name="domain_force">['|', ('department_id', 'in', user.author_department_ids.ids), ('department_id','=',
                False)]
            </field>
            <field name="groups" eval="[(4, ref('purchase.group_purchase_manager'))]"/>
        </record>
    </data>
</odoo>