<?xml version="1.0"?>
<odoo>
    <data>
        <record id="hr_salary_rule_form_inherit" model="ir.ui.view">
            <field name="name">hr.salary.rule.form.inherit</field>
            <field name="model">hr.salary.rule</field>
            <field name="inherit_id" ref="hr_payroll.hr_salary_rule_form"/>
            <field name="arch" type="xml">
                <field name="struct_id" position="attributes">
                    <attribute name="widget">many2many_tags</attribute>
                </field>
                <!--Add page for the configuration of the rule-->
                <page name='general' position="before">
                    <page name="config" string="Configuration">
                        <group name="general_config">
                            <group string="Rule Type">
                                <field name="smartest_rule_create_auto" widget="radio"/>
                                <field name="smartest_rule_type" widget="radio"
                                       attrs="{'invisible': [('smartest_rule_create_auto', 'not in', 'other')],'required': [('smartest_rule_create_auto', 'in', 'other')]}"/>
                            </group>

                            <group>
                                <br/>
                                <br/>

                                <field name="smartest_rule_val" widget="radio"
                                       attrs="{'invisible': ['|','|',('smartest_rule_type', '=', False),('smartest_rule_create_auto', 'not in', 'other'),('smartest_rule_type', 'in', ('regul_cot', 'regul_lmp', 'regul_base'))],
                                                'required': [('smartest_rule_create_auto', 'in', 'other'),('smartest_rule_type', '!=', False),('smartest_rule_type', 'not in', ('regul_cot', 'regul_lmp', 'regul_base'))]}"/>
                                <field name="smartest_rule_amount_type" widget="selection"
                                       attrs="{'invisible': ['|','|',('smartest_rule_create_auto', 'not in', 'other'),('smartest_rule_val', 'not in', ('gain', 'deduction')),('smartest_rule_type', 'in', ('regul_cot', 'regul_lmp', 'regul_base'))],
                                               'required': [('smartest_rule_create_auto', 'in', 'other'),('smartest_rule_val', 'in', ('gain', 'deduction')),('smartest_rule_type', 'not in', ('regul_cot', 'regul_lmp', 'regul_base'))]}"/>
                                <field name="smartest_amount_value_type" widget="selection"
                                       attrs="{'invisible': ['|','|',('smartest_rule_create_auto', 'not in', 'other'),('smartest_rule_val', 'not in', ('gain', 'deduction')),('smartest_rule_type', 'in', ('regul_cot', 'regul_lmp', 'regul_base'))],
                                       'required': [('smartest_rule_create_auto', 'in', 'other'),('smartest_rule_val', 'in', ('gain', 'deduction')),('smartest_rule_type', 'not in', ('regul_cot', 'regul_lmp', 'regul_base'))]}"/>
                                <field name="smartest_attendance_depends"
                                       attrs="{'invisible': ['|','|',('smartest_rule_amount_type', 'in', 'fixe'),('smartest_rule_create_auto', 'not in', 'other'),('smartest_rule_type', 'in', ('regul_cot', 'regul_lmp', 'regul_base'))]}"/>

                                <field name="smartest_leave_depends"
                                       attrs="{'invisible': ['|','|',('smartest_rule_amount_type', 'in', 'fixe'),('smartest_rule_create_auto', 'not in', 'other'),('smartest_rule_type', 'in', ('regul_cot', 'regul_lmp', 'regul_base'))]}"/>

                                <field name="smartest_amount_fixe_rule"
                                       attrs="{'invisible': ['|','|','|',('smartest_rule_amount_type', 'not in', 'fixe'),('smartest_rule_create_auto', 'not in', 'other'),('smartest_rule_val', 'not in', ('gain', 'deduction')),('smartest_rule_type', 'in', ('regul_cot', 'regul_lmp', 'regul_base'))],
                                       'required': [('smartest_rule_amount_type', 'in', 'fixe'),('smartest_rule_create_auto', 'in', 'other'),('smartest_rule_val', 'in', ('gain', 'deduction')),('smartest_rule_type', 'not in', ('regul_cot', 'regul_lmp', 'regul_base'))]}"/>
                                <field name="smartest_rate_rule"
                                       attrs="{'invisible': ['|','|',('smartest_rule_create_auto', 'not in', 'other'),('smartest_rule_val', 'not in', 'rate'),('smartest_rule_type', 'in', ('regul_cot', 'regul_lmp', 'regul_base'))],
                                       'required': [('smartest_rule_create_auto', 'in', 'other'),('smartest_rule_val', 'in', 'rate'),('smartest_rule_type', 'not in', ('regul_cot', 'regul_lmp', 'regul_base'))]}"/>
                                <field name="smartest_name_var"
                                       attrs="{'invisible': ['|','|','|',('smartest_rule_amount_type', 'not in', 'variable'),('smartest_rule_create_auto', 'not in', 'other'),('smartest_rule_val', 'not in', ('gain', 'deduction')),('smartest_rule_type', 'in', ('regul_cot', 'regul_lmp', 'regul_base'))]}"/>
                                <label for="smartest_field_id"
                                       attrs="{'invisible': ['|','|','|',('smartest_rule_amount_type', 'not in', 'variable'),('smartest_rule_create_auto', 'not in', 'other'),('smartest_rule_val', 'not in', ('gain', 'deduction')),('smartest_rule_type', 'in', ('regul_cot', 'regul_lmp', 'regul_base'))]}"/>

                                <div>
                                    <field name="smartest_field_id" widget="selection" class="oe_inline"
                                           attrs="{'invisible': ['|','|','|',('smartest_rule_amount_type', 'not in', 'variable'),('smartest_rule_create_auto', 'not in', 'other'),('smartest_rule_val', 'not in', ('gain', 'deduction')),('smartest_rule_type', 'in', ('regul_cot', 'regul_lmp', 'regul_base'))]}"/>
                                    <button name="action_creation_custom_variable" width="40" class="oe_inline"
                                            icon="fa-plus"
                                            type="object" confirm="Are you sure you want to create a new variable ?"
                                            attrs="{'invisible': ['|','|','|',('smartest_rule_amount_type', 'not in', 'variable'),('smartest_rule_create_auto', 'not in', 'other'),('smartest_rule_val', 'not in', ('gain', 'deduction')),('smartest_rule_type', 'in', ('regul_cot', 'regul_lmp', 'regul_base'))]}"/>


                                </div>
                                <field name="smartest_regul_type"
                                       attrs="{'invisible': ['|',('smartest_rule_create_auto', 'not in', 'other'),('smartest_rule_type', 'not in', ('regul_cot', 'regul_lmp', 'regul_base'))],
                                       'required': [('smartest_rule_create_auto', 'in', 'other'),('smartest_rule_type', 'in', ('regul_cot', 'regul_lmp', 'regul_base'))]}"/>
                                <label for="smartest_code_prefix" string="Code Configuration"
                                       groups="base.group_no_one"/>
                                <div class="o_row">
                                    <field name="smartest_code_prefix" placeholder="Prefix" class="oe_inline"
                                           groups="base.group_no_one"/>
                                    <field name="smartest_padding_code" placeholder="Code Lengh" class="oe_inline"
                                           groups="base.group_no_one"/>
                                </div>

                            </group>

                        </group>

                    </page>
                </page>
                <!--Fields visible on debug mode-->
                <field name='category_id' position="attributes">
                    <attribute name="groups">base.group_no_one</attribute>
                    <attribute name="required">0</attribute>
                    <attribute name="attrs">{'required': [('id', '!=', False)]}</attribute>
                </field>
                <label for='category_id' position="attributes">
                    <attribute name="groups">base.group_no_one</attribute>
                </label>
                <field name='code' position="attributes">
                    <attribute name="groups">base.group_no_one</attribute>
                </field>
                <field name='appears_on_payslip' position="after">
                    <label for="smartest_date_from" string="Validity From"/>
                    <div class="oe_row">
                        <field name="smartest_date_from" no_label="1"/>
                        <label for="smartest_date_to" string="To"/>
                        <field name="smartest_date_to" no_label="1"/>
                    </div>
                </field>
                <!--Pages visible on debug mode-->
                <page name='description' position="attributes">
                    <attribute name="groups">base.group_no_one</attribute>
                </page>
                <page name='general' position="attributes">
                    <attribute name="groups">base.group_no_one</attribute>
                </page>

            </field>
        </record>
      <record id="view_hr_rule_filter_inherit" model="ir.ui.view">
        <field name="name">hr.salary.rule.select.inherit</field>
        <field name="model">hr.salary.rule</field>
        <field name="inherit_id" ref="hr_payroll.view_hr_rule_filter"/>
        <field name="arch" type="xml">
            <filter name="group_by_struct_id" position="replace"/>
        </field>
    </record>

    <record id="hr_payroll.action_salary_rule_form" model="ir.actions.act_window">
        <field name="context">{}</field>
    </record>
    </data>
</odoo>