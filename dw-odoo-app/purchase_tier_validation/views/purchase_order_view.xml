<?xml version="1.0" encoding="utf-8" ?>
<!-- Copyright 2017 ForgeFlow S.L.
     License AGPL-3.0 or later (https://www.gnu.org/licenses/agpl). -->
<odoo>
    <record id="purchase_order_form" model="ir.ui.view">
        <field name="name">purchase.order.form</field>
        <field name="model">purchase.order</field>
        <field name="inherit_id" ref="purchase.purchase_order_form"/>
        <field name="arch" type="xml">
            <xpath expr="//header" position="after">
                <header>
                    <field name="validation_state" widget="statusbar"/>
                </header>
            </xpath>
<!--            <xpath expr="sheet//div[@name='button_box']" position="inside">-->
<!--                <button name="action_view_purchase_request" type="object" class="oe_stat_button"-->
<!--                        icon="fa-shopping-cart">-->
<!--                    <field name="purchase_request_count" widget="statinfo" string="Request(s)"/>-->
<!--                </button>-->
<!--            </xpath>-->
            <xpath expr="//sheet//group//group[2]//field[@name='date_order']" position="after">
                <field name="purchase_request_id" string="Origin Requests"/>

            </xpath>
        </field>
    </record>
    <record id="purchase_order_tree_inherit" model="ir.ui.view">
        <field name="name">purchase.order.tree</field>
        <field name="model">purchase.order</field>
        <field name="inherit_id" ref="purchase.purchase_order_view_tree"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='state']" position="before">
                    <field name="validation_state" widget="badge" decoration-success="validation_state == 'validated'" decoration-info="validation_state == 'to_approuve'" optional="show"/>
            </xpath>
        </field>
    </record>
    <record id="purchase_order_kpis_tree_inherit" model="ir.ui.view">
        <field name="name">purchase.order.tree</field>
        <field name="model">purchase.order</field>
        <field name="inherit_id" ref="purchase.purchase_order_kpis_tree"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='state']" position="before">
                    <field name="validation_state" widget="badge" decoration-success="validation_state == 'validated'" decoration-info="validation_state == 'to_approuve'" optional="show"/>
            </xpath>
        </field>
    </record>
    <record id="view_purchase_order_filter_inherited" model="ir.ui.view">
        <field name="name">purchase.order.search</field>
        <field name="model">purchase.order</field>
        <field name="inherit_id" ref="purchase.view_purchase_order_filter"/>
        <field name="arch" type="xml">
            <xpath expr="//filter[@name='order_date']" position="after">
                <filter string="Etat Validation" name="validation_state" domain="[]" context="{'group_by': 'validation_state'}"/>
            </xpath>
        </field>
    </record>
</odoo>
